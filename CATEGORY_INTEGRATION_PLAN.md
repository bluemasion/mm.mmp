# 2000条近似物料数据与主数据标准分类整合方案

**当前状态**: ✅ 已从9107条数据成功抽取2000条近似物料数据
**目标**: 将2000条数据与主数据系统的532个标准分类进行整合对接

## 🎯 整合策略

### 方案A: 分类映射表方案 (推荐)

**实施步骤**:
1. 创建分类映射表，建立72个抽取分类与532个标准分类的对应关系
2. 在模糊匹配API中同时返回原始分类和标准分类
3. 前端展示时优先显示标准分类，保留原始分类作为补充

**技术实现**:
```sql
-- 创建分类映射表
CREATE TABLE category_mapping (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    original_category TEXT NOT NULL,     -- 原始分类名 (72个)
    standard_category TEXT NOT NULL,     -- 标准分类名 (532个)
    mapping_confidence REAL DEFAULT 1.0, -- 映射置信度
    mapping_type TEXT DEFAULT 'manual',  -- 映射类型
    data_count INTEGER DEFAULT 0,        -- 数据量
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

**API增强**:
```python
# 在single_fuzzy_matching_api.py中增强返回结果
{
    "similar_materials": [...],
    "recommended_categories": [
        {
            "category_name": "疏水器",
            "standard_category": "阀门类",  # 对应的标准分类
            "source": "similar_data",
            "confidence": 74.5
        },
        {
            "category_name": "阀门类",
            "source": "standard_data", # 来自标准分类系统
            "confidence": 68.0
        }
    ]
}
```

### 方案B: 数据标准化方案

**实施步骤**:
1. 直接将2000条数据的分类字段更新为标准分类名称
2. 建立映射规则，批量更新数据库
3. 统一使用标准分类体系

**优势**: 数据一致性强，系统简洁
**风险**: 可能丢失原始分类的专业细分信息

## 🔧 具体映射建议

### 重点映射关系 (按数据量排序)

| 原始分类 | 数据量 | 建议标准分类 | 映射类型 |
|----------|--------|--------------|----------|
| 其它管道配件 | 1288条 | 管道配件 | 直接映射 |
| 金属软管 | 205条 | 软管总成 | 直接映射 |
| 带颈对焊法兰 | 143条 | 带颈对焊法兰 | 已匹配✅ |
| 过滤器 | 56条 | 过滤器 | 需确认标准分类中是否存在 |
| 疏水器 | 14条 | 需新增到标准分类 | 补充映射 |

### 映射优先级策略

**P0 (立即处理)**: 数据量>100条的分类
- 其它管道配件 → 管道配件
- 金属软管 → 软管总成  
- 带颈对焊法兰 → 已匹配

**P1 (重要)**: 数据量20-100条的分类
- 过滤器、管道架构件等

**P2 (补充)**: 数据量<20条的分类
- 各种细分管件类别

## 🚀 实施建议

### 立即可行的方案
推荐先实施**方案A**，因为它：
1. ✅ 保持现有数据完整性
2. ✅ 可以渐进式实施
3. ✅ 同时满足专业性和标准化需求
4. ✅ 不影响现有的模糊匹配功能

### 下一步行动
1. **创建映射表**: 建立category_mapping表
2. **映射核心分类**: 先处理数据量大的分类
3. **API增强**: 在返回结果中包含标准分类信息
4. **前端优化**: 界面上优先展示标准分类

您觉得这个整合方案如何？我们可以立即开始实施吗？